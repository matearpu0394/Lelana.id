{% extends "layouts/base.html" %}

{% block title %}{{ itinerari.judul }}{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto bg-white border border-gray-100 rounded-2xl shadow-sm p-8 mt-8 animate-[fadeInUp_0.3s_ease-out]">
  <h2 class="text-3xl font-semibold text-gray-800 mb-2">{{ itinerari.judul }}</h2>

  <p class="text-gray-600 mb-1">
    Sebuah petualangan yang dibagikan oleh
    <strong class="text-gray-800">{{ itinerari.penulis.username }}</strong>
  </p>
  <p class="text-sm text-gray-500 mb-6">Dibuat pada: {{ itinerari.tanggal_dibuat.strftime('%d %B %Y') }}</p>

  {% if itinerari.deskripsi %}
  <div class="border-t border-gray-100 pt-5">
    <h4 class="text-lg font-medium text-gray-800 mb-2">Cerita Petualangan</h4>
    <p class="text-gray-700 leading-relaxed">{{ itinerari.deskripsi|safe }}</p>
  </div>
  {% endif %}

  <div class="border-t border-gray-100 mt-6 pt-5">
    <h4 class="text-lg font-medium text-gray-800 mb-3">Rute Perjalanan</h4>
    {% if itinerari.wisata_termasuk %}
    <ul class="space-y-3">
      {% for wisata in itinerari.wisata_termasuk %}
      <li class="bg-gray-50 border border-gray-200 p-4 rounded-lg hover:shadow-sm transition">
        <a href="{{ url_for('wisata.detail_wisata', id=wisata.id) }}" class="text-primary font-semibold hover:underline">
          {{ wisata.nama }}
        </a>
        <p class="text-sm text-gray-600 mt-1">Lokasi: {{ wisata.lokasi }}</p>
      </li>
      {% endfor %}
    </ul>
    {% else %}
    <p class="text-gray-600">Tidak ada tempat wisata yang ditambahkan ke itinerari ini.</p>
    {% endif %}
  </div>

  {% if current_user.is_authenticated and current_user.id == itinerari.penulis.id %}
  <div class="mt-8 flex items-center space-x-3">
    <a href="{{ url_for('itinerari.edit_itinerari', id=itinerari.id) }}" class="inline-block px-4 py-2 bg-yellow-400 text-gray-800 rounded-md hover:bg-yellow-500 transition">
      Edit Itinerari
    </a>
    <form action="{{ url_for('itinerari.hapus_itinerari', id=itinerari.id) }}" method="POST" onsubmit="return confirm('Apakah Anda yakin ingin menghapus itinerari ini?');">
      {{ delete_form.hidden_tag() }}
      <button type="submit" class="px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition">
        Hapus Itinerari
      </button>
    </form>
  </div>
  {% endif %}

  <p class="mt-8">
    <a href="{{ url_for('itinerari.list_itinerari') }}" class="text-primary hover:underline">&laquo; Kembali ke Daftar Itinerari</a>
  </p>
</div>
{% endblock %}