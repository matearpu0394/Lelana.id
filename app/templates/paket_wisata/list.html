{% extends "layouts/base.html" %}

{% block title %}Paket Wisata - Lelana.id{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto py-10 animate-[fadeInUp_0.3s_ease-out]">

  <div class="flex items-center justify-between mb-8">
      <h2 class="text-3xl font-bold text-gray-800">Daftar Paket Wisata</h2>
      {% if current_user.is_authenticated and current_user.role == 'admin' %}
      <a href="{{ url_for('paket_wisata.tambah_paket') }}"
         class="inline-flex items-center bg-primary text-white font-medium px-5 py-2 rounded-lg shadow-sm hover:bg-primary/90 transition">
         + Tambah Paket Baru
      </a>
      {% endif %}
  </div>

  {% if daftar_paket %}
  <div class="grid md:grid-cols-2 gap-6">
      {% for paket in daftar_paket %}
      <article class="border border-gray-100 rounded-xl p-6 bg-white shadow-sm hover:shadow-md transition">
          <h3 class="text-xl font-semibold text-gray-800 mb-1">{{ paket.nama }}</h3>
          <p class="text-primary font-medium mb-3">
              Rp {{ "{:,.0f}".format(paket.harga).replace(",", ".") }}
          </p>
          <p class="text-gray-600 mb-4">{{ paket.deskripsi[:150] }}...</p>
          
          <div class="flex flex-wrap gap-3">
              <a href="{{ url_for('paket_wisata.detail_paket', id=paket.id) }}"
                 class="px-4 py-2 bg-primary text-white text-sm rounded-md hover:bg-primary/90 transition">
                 Lihat Detail
              </a>

              {% if current_user.is_authenticated and current_user.role == 'admin' %}
              <a href="{{ url_for('paket_wisata.edit_paket', id=paket.id) }}"
                 class="px-4 py-2 bg-yellow-400 text-gray-900 text-sm rounded-md hover:bg-yellow-300 transition">
                 Edit
              </a>

              <form action="{{ url_for('paket_wisata.hapus_paket', id=paket.id) }}" method="POST"
                    class="inline"
                    onsubmit="return confirm('Hapus paket ini?');">
                  {{ delete_form.hidden_tag() }}
                  <button type="submit"
                          class="px-4 py-2 bg-red-500 text-white text-sm rounded-md hover:bg-red-600 transition">
                      Hapus
                  </button>
              </form>
              {% endif %}
          </div>
      </article>
      {% endfor %}
  </div>
  {% else %}
  <p class="text-gray-500 italic mt-6">Belum ada paket wisata.</p>
  {% endif %}
</div>
{% endblock %}